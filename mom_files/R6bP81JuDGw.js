/*!CK:3648066890!*//*1428961404,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["fioMR"]); }

__d("FacebarGSv2Echo",["FacebarGlobalOptions","FacebarJSConstants","FacebarKeywordSearchUtils","FacebarStructuredText","cx"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={insertInto:function(m,n){if(this._shouldInsert(m,n)){var o=n.findIndex(this._isKeywordSuggestion,this);if(o<0)o=n.length;this._removeExactMatchFromResults(m,n);n.splice(o,0,this._createEchoResult(m));}},_shouldInsert:function(m,n){if(!m||!g.graphSearchV2)return false;if(g.newSingleStateTypeaheadWithoutFeedSearch)return n.every(function(o){return !o.isSingleState;});return true;},_isKeywordSuggestion:function(m){return m.type===h.keywordType||m.type===h.grammarType;},_removeExactMatchFromResults:function(m,n){m=this._normalizeValue(m);for(var o=0;o<n.length;o++){var p=n[o];if(this._isKeywordSuggestion(p)&&m===this._normalizeValue(p.text)){n.splice(o,1);return;}}},_normalizeValue:function(m){return String(m).trim().replace(/\s+/g,' ').replace(/[\u200E|\u200F|\u202a|\u202b|\u202c]/g,'').toLowerCase();},_createEchoResult:function(m){m=this._normalizeValue(m);var n=i.makeFacebarEntry(m);return {type:'keyword',results_set_type:h.browseTypes.keyword,text:m,id:m,uid:m,query_string:m,icon_class:"_5b1w",exactMatchKeyword:true,structure:j.fromString(m),semantic:n.semantic,uri:n.uri};}};e.exports=l;},null);